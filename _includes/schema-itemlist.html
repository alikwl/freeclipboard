{% comment %}
ItemList Schema for Category/Collection Pages
Usage: {% include schema-itemlist.html items=tools list_name="Tools" %}
{% endcomment %}

{% if include.items and include.items.size > 0 %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "ItemList",
  "name": "{{ include.list_name | default: page.title | escape }}",
  "description": "{{ page.description | escape }}",
  "numberOfItems": {{ include.items.size }},
  "itemListElement": [
    {% for item in include.items %}
    {
      "@type": "ListItem",
      "position": {{ forloop.index }},
      "item": {
        "@type": "WebApplication",
        "name": "{{ item.name | escape }}",
        "description": "{{ item.description | default: item.shortDescription | escape }}",
        "url": "{{ site.url }}{{ item.url }}",
        "applicationCategory": "UtilityApplication",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD"
        }
        {% if item.rating %},
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "{{ item.rating }}",
          "ratingCount": "{{ item.usageCount | default: 500 }}"
        }
        {% endif %}
      }
    }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ]
}
</script>
{% endif %}
