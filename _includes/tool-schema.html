{% comment %}
=============================================================================
Enhanced Tool Schema Markup Generator
Generates comprehensive JSON-LD structured data for tool pages
Supports: WebApplication, SoftwareApplication, FAQPage, HowTo, Review
=============================================================================
{% endcomment %}

{% assign tool_name = page.title | split: ' - ' | first | split: ' | ' | first %}
{% assign tool_url = site.url | append: page.url | replace: 'index.html', '' %}

{% comment %} Main WebApplication Schema {% endcomment %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "@id": "{{ tool_url }}#webapp",
  "name": "{{ tool_name }}",
  "alternateName": "{{ page.alt_name | default: tool_name }} - FreeClipboard",
  "description": "{{ page.description | escape }}",
  "url": "{{ tool_url }}",
  "applicationCategory": "UtilityApplication",
  "applicationSubCategory": "{{ page.subcategory | default: 'Online Tool' }}",
  "operatingSystem": "Any (Web Browser)",
  "browserRequirements": "Requires JavaScript. Requires HTML5.",
  "softwareVersion": "1.0",
  "screenshot": "{{ site.url }}/assets/images/tools/{{ page.slug | default: 'default' }}.png",
  "featureList": [
    {% if page.features %}
    {% for feature in page.features %}
    "{{ feature | escape }}"{% unless forloop.last %},{% endunless %}
    {% endfor %}
    {% else %}
    "Free to use - no payment required",
    "No signup or registration needed",
    "100% privacy-focused - data stays in browser",
    "Works offline after first load",
    "Mobile-friendly responsive design",
    "Instant results with no server delays"
    {% endif %}
  ],
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD",
    "availability": "https://schema.org/InStock",
    "priceValidUntil": "2030-12-31"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "{{ page.rating | default: 4.8 }}",
    "ratingCount": "{{ page.rating_count | default: 500 }}",
    "bestRating": "5",
    "worstRating": "1",
    "reviewCount": "{{ page.review_count | default: page.rating_count | default: 500 }}"
  },
  "author": {
    "@id": "{{ site.url }}/#organization"
  },
  "publisher": {
    "@id": "{{ site.url }}/#organization"
  },
  "provider": {
    "@id": "{{ site.url }}/#organization"
  },
  "isAccessibleForFree": true,
  "isFamilyFriendly": true,
  "inLanguage": "en-US",
  "audience": {
    "@type": "Audience",
    "audienceType": "{{ page.audience | default: 'Developers, Writers, Professionals, Students' }}"
  },
  "potentialAction": {
    "@type": "UseAction",
    "target": "{{ tool_url }}",
    "name": "Use {{ tool_name }}"
  },
  "datePublished": "{{ page.date_published | default: '2024-01-01' }}",
  "dateModified": "{{ page.last_updated | default: site.time | date: '%Y-%m-%d' }}"
}
</script>

{% comment %} SoftwareApplication Schema for broader coverage {% endcomment %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "{{ tool_name }}",
  "description": "{{ page.description | escape }}",
  "url": "{{ tool_url }}",
  "applicationCategory": "WebApplication",
  "operatingSystem": "Any",
  "downloadUrl": "{{ tool_url }}",
  "installUrl": "{{ tool_url }}",
  "permissions": "browser",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD",
    "availability": "https://schema.org/InStock"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "{{ page.rating | default: 4.8 }}",
    "ratingCount": "{{ page.rating_count | default: 500 }}"
  }
}
</script>

{% comment %} WebPage Schema with Speakable for Voice Search {% endcomment %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "@id": "{{ tool_url }}#webpage",
  "name": "{{ page.title | escape }}",
  "description": "{{ page.description | escape }}",
  "url": "{{ tool_url }}",
  "isPartOf": {
    "@id": "{{ site.url }}/#website"
  },
  "about": {
    "@id": "{{ tool_url }}#webapp"
  },
  "primaryImageOfPage": {
    "@type": "ImageObject",
    "url": "{{ site.url }}/assets/images/tools/{{ page.slug | default: 'default' }}.png"
  },
  "speakable": {
    "@type": "SpeakableSpecification",
    "cssSelector": [".tool-header h1", ".tool-header .lead", ".hero-content h1", ".hero-content p"]
  },
  "inLanguage": "en-US",
  "datePublished": "{{ page.date_published | default: '2024-01-01' }}",
  "dateModified": "{{ page.last_updated | default: site.time | date: '%Y-%m-%d' }}"
}
</script>

{% comment %} Dynamic FAQ Schema based on tool type {% endcomment %}
{% if page.faqs %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {% for faq in page.faqs %}
    {
      "@type": "Question",
      "name": "{{ faq.question | escape }}",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "{{ faq.answer | escape }}"
      }
    }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ]
}
</script>
{% else %}
{% comment %} Default FAQ for all tools {% endcomment %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "Is {{ tool_name }} free to use?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, {{ tool_name }} is completely free with no hidden costs, premium plans, or usage limits. No signup required."
      }
    },
    {
      "@type": "Question",
      "name": "Is my data safe with {{ tool_name }}?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Absolutely! All processing happens locally in your browser. Your data never leaves your device and is never sent to our servers."
      }
    },
    {
      "@type": "Question",
      "name": "Does {{ tool_name }} work on mobile devices?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, {{ tool_name }} is fully responsive and works perfectly on smartphones, tablets, and desktop computers."
      }
    },
    {
      "@type": "Question",
      "name": "Do I need to create an account to use {{ tool_name }}?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "No account or signup is required. Just visit the page and start using the tool immediately."
      }
    }
  ]
}
</script>
{% endif %}

{% comment %} HowTo Schema if page has steps defined {% endcomment %}
{% if page.howto_steps %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "HowTo",
  "name": "{{ page.howto_name | default: 'How to Use ' | append: tool_name }}",
  "description": "{{ page.howto_description | default: page.description | escape }}",
  "totalTime": "{{ page.howto_time | default: 'PT2M' }}",
  "estimatedCost": {
    "@type": "MonetaryAmount",
    "currency": "USD",
    "value": "0"
  },
  "tool": {
    "@type": "HowToTool",
    "name": "Web Browser"
  },
  "step": [
    {% for step in page.howto_steps %}
    {
      "@type": "HowToStep",
      "position": {{ forloop.index }},
      "name": "{{ step.name | escape }}",
      "text": "{{ step.text | escape }}",
      "url": "{{ tool_url }}#step-{{ forloop.index }}"
    }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ]
}
</script>
{% endif %}